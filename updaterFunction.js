function updater(arg_currentCommitInfo) {
  var ch = arg_currentCommitInfo;
//    console.info(ch);

  var receivedCommitHistory;
//  var receivedCommitHistory = ".'{"commits":[{"parents":[{"id":"95ad5cf6dbd0e9fdd1bf1147c0b06ecbf27091a5"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/fd89463c7f137e95b02c5823150d5a70238e953c","id":"fd89463c7f137e95b02c5823150d5a70238e953c","committed_date":"2011-07-23T10:30:39-07:00","authored_date":"2011-07-23T10:30:39-07:00","message":"Amended some of the preference storage code to not treat false default values as erroneous & replaced by an empty string;\n\nAdded a new column (disabled by default, toggled by < greasemonkey.scriptvals.http://kwah.org//Spanghurt.showRefClicks >) to the referral listings pages that displays the difference in total clicks of each day and the stored total previous to it - EXTREMELY unreliable, dependant heavily on when the referral listings pages are viewed. Ref: #17","tree":"f1bf95ba2069011f482a998590a082f054950f6a","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"f57c6428b3f54057f6dd74d7c19999c111fefcb9"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/95ad5cf6dbd0e9fdd1bf1147c0b06ecbf27091a5","id":"95ad5cf6dbd0e9fdd1bf1147c0b06ecbf27091a5","committed_date":"2011-07-23T06:27:55-07:00","authored_date":"2011-07-23T06:27:55-07:00","message":"Added sorting arrows to the referral listings; added code to remove the duplicate sorting arrows; Ref: #13","tree":"21b4bcd5d4777cb5e0d5f607b9a600bbbb4e5d79","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"e335ea98792f43702048e8d63f44b97c62900fca"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/f57c6428b3f54057f6dd74d7c19999c111fefcb9","id":"f57c6428b3f54057f6dd74d7c19999c111fefcb9","committed_date":"2011-07-22T15:33:00-07:00","authored_date":"2011-07-22T15:33:00-07:00","message":"Add sorting arrows to the referral graphs ( ref: #13 );","tree":"f0957c3c97031f569c7fb2ac31700af14890dd10","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"b1c22f4f36c5fd5dd43eea2345030bf46fd861ef"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/e335ea98792f43702048e8d63f44b97c62900fca","id":"e335ea98792f43702048e8d63f44b97c62900fca","committed_date":"2011-07-22T11:08:22-07:00","authored_date":"2011-07-22T11:08:22-07:00","message":"Stop overwriting the column header links when replacing the column contents;","tree":"14b799ccec8187b00645f696cb34668eae4da044","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"60054ffa9a906cba5c1457826c2005164efd474a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/b1c22f4f36c5fd5dd43eea2345030bf46fd861ef","id":"b1c22f4f36c5fd5dd43eea2345030bf46fd861ef","committed_date":"2011-07-20T05:48:01-07:00","authored_date":"2011-07-20T05:48:01-07:00","message":"Added projected net income to the statsSidebar (related: issue #7 ) BUT code style issues remain (its not a \'clean\' implementation);","tree":"10e80b204c53dc9643ac1d3a86fcb768ac09df2b","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"489adffabf61c373ad7a376cf6f0dc9a22a756b8"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/60054ffa9a906cba5c1457826c2005164efd474a","id":"60054ffa9a906cba5c1457826c2005164efd474a","committed_date":"2011-07-20T05:42:15-07:00","authored_date":"2011-07-20T05:42:15-07:00","message":"Fixed the displayed (projected) number of rented clicks in the statsSidebar;","tree":"db3b1562409e15d516e4fc210a422001a05ba471","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"1044037f5cd0ada90fea24fc880128157058c6f8"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/489adffabf61c373ad7a376cf6f0dc9a22a756b8","id":"489adffabf61c373ad7a376cf6f0dc9a22a756b8","committed_date":"2011-07-19T18:12:35-07:00","authored_date":"2011-07-19T18:12:35-07:00","message":"Changed light blue bar to indicate the mean profit over the last ten days as opposed to moving average; related: #11 ;","tree":"e00703946272d0bd1ac93436b4c626d22200d522","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"9abd4a2cc2721008314c941672a339b1618189b6"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/1044037f5cd0ada90fea24fc880128157058c6f8","id":"1044037f5cd0ada90fea24fc880128157058c6f8","committed_date":"2011-07-18T19:11:09-07:00","authored_date":"2011-07-18T19:11:09-07:00","message":"Minor bugtweak for the profit graph to include today (missed a single = sign)","tree":"75f2a4a420a4c49d9483425a9588c3dffcd7bf63","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"eeb09ccd07606807b953442946fded560bdd6a4a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/9abd4a2cc2721008314c941672a339b1618189b6","id":"9abd4a2cc2721008314c941672a339b1618189b6","committed_date":"2011-07-18T17:39:17-07:00","authored_date":"2011-07-18T17:39:17-07:00","message":"Moved the call to insertProfitGraph() so that it only gets called on the referralStatistics page;","tree":"f522057c391019ffc47fd941ce53b2f41c82d0bf","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"9ec75a6bfc831dbb788ae5d1c255c7b69bce3818"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/eeb09ccd07606807b953442946fded560bdd6a4a","id":"eeb09ccd07606807b953442946fded560bdd6a4a","committed_date":"2011-07-18T16:43:00-07:00","authored_date":"2011-07-18T16:43:00-07:00","message":"Removed an extra couple of characters that had erroneously crept in;","tree":"d2a974dafbd940215d9e655dc904d795ed497aa7","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a1fd0f7308e6dfa10c5e3b7e6957208ce0af7cf5"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/9ec75a6bfc831dbb788ae5d1c255c7b69bce3818","id":"9ec75a6bfc831dbb788ae5d1c255c7b69bce3818","committed_date":"2011-07-18T16:35:15-07:00","authored_date":"2011-07-18T16:35:15-07:00","message":"Added profit graph to the referral statistics page ( related: #11 ); Fixed goldenCost for golden members;","tree":"fbaea1d936e43b91aa85261ff9add4d42de12d46","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"5696a6418b3613b8ab7eaad5accd807d4bd17f39"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a1fd0f7308e6dfa10c5e3b7e6957208ce0af7cf5","id":"a1fd0f7308e6dfa10c5e3b7e6957208ce0af7cf5","committed_date":"2011-07-18T12:29:13-07:00","authored_date":"2011-07-18T12:29:13-07:00","message":"Filled in / corrected missing parameters in generateSidebarData();","tree":"bd212166083a6c81c494a25340f1444aae36d62f","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"d330c8d00da654d3d0d17a0ea29e71243b44abf1"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/5696a6418b3613b8ab7eaad5accd807d4bd17f39","id":"5696a6418b3613b8ab7eaad5accd807d4bd17f39","committed_date":"2011-07-18T12:12:36-07:00","authored_date":"2011-07-18T12:12:36-07:00","message":"Removed tabs at ends of lines for the export text; Whole bunch of rearranging the code within the insertSidebar() function; Confirmed that the values created into statsSidebar[] are correct;","tree":"1277d7c53d2356286addbde4ecd6bff55e58fd80","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"fd1b9ccbf381556ef8085a16ee8377302484ade2"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/d330c8d00da654d3d0d17a0ea29e71243b44abf1","id":"d330c8d00da654d3d0d17a0ea29e71243b44abf1","committed_date":"2011-07-18T05:51:49-07:00","authored_date":"2011-07-18T05:51:49-07:00","message":"Changed appearance of D/H/M text to be less light & more readable;","tree":"9d75d83fe775651f1e1772e7969e0c6e15b25203","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"da91c42842c8031d0cff7f59ae009abb117d71b6"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/fd1b9ccbf381556ef8085a16ee8377302484ade2","id":"fd1b9ccbf381556ef8085a16ee8377302484ade2","committed_date":"2011-07-16T09:53:18-07:00","authored_date":"2011-07-16T09:53:18-07:00","message":"Added column indexes specific to the direct referrals page;","tree":"79800332fad6fdea9b7ef169325a64106396c490","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"5181b396d5446dabb0b78d642022eef7ec1a550f"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/da91c42842c8031d0cff7f59ae009abb117d71b6","id":"da91c42842c8031d0cff7f59ae009abb117d71b6","committed_date":"2011-07-16T07:21:21-07:00","authored_date":"2011-07-16T07:21:21-07:00","message":"Removed the ultimate click values column temporarily until it is functioning correctly; Added colours to the netIncome column - red indicates negative netIncome, blue indicates positive netIncome but less than the cost of a recycle; green indicates a positive netIncome above the cost of a recycle; black indicates zero netIncome or a netIncome equal to the cost of a recycle;","tree":"fd778def1bb26b8e1623b0b5b44cafbfffe10157","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"2898c3c72b31a53c041a1bbe4f3f9d6113bed317"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/5181b396d5446dabb0b78d642022eef7ec1a550f","id":"5181b396d5446dabb0b78d642022eef7ec1a550f","committed_date":"2011-07-15T17:44:52-07:00","authored_date":"2011-07-15T17:44:52-07:00","message":"Oops, missed the next payment column.. Done now..","tree":"90379bd44987f68c33d77d26086f4a23ec8210c5","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"40781807eaa0cf92c4ea3858c80ca3fe5a4ef5db"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/2898c3c72b31a53c041a1bbe4f3f9d6113bed317","id":"2898c3c72b31a53c041a1bbe4f3f9d6113bed317","committed_date":"2011-07-15T17:29:30-07:00","authored_date":"2011-07-15T17:29:30-07:00","message":"Added functionality to append / prepend / replace referral listings column contents (so that they\'re not all simply added as new columns; Added checks in with the ultimate-only click guide code so that it doesn\'t crash and burn when something goes amiss with detecting the ultimate minigraph data sources;","tree":"c67d757f938d5695ce83d000c74a7162d4a80dff","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"7eb0239ad34657f74be34f28b50bb34de9367ea3"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/40781807eaa0cf92c4ea3858c80ca3fe5a4ef5db","id":"40781807eaa0cf92c4ea3858c80ca3fe5a4ef5db","committed_date":"2011-07-14T16:19:47-07:00","authored_date":"2011-07-14T16:19:47-07:00","message":"Fixed &laquo; on adCounterBox; Started code for running modules;","tree":"9cdccca090044e4f372fc2dfa8e5674b953616af","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"8324300cf4b9b159a67a9b00f636968f63c1a54d"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/7eb0239ad34657f74be34f28b50bb34de9367ea3","id":"7eb0239ad34657f74be34f28b50bb34de9367ea3","committed_date":"2011-07-14T15:18:55-07:00","authored_date":"2011-07-14T15:18:55-07:00","message":"Rearranged some parts of the code to try and make it more organised.. certainly not the last time moves like this will be done; Switched a bunch of Neobux.accountDefaults to getter functions; Added an escape path if cannot find any graph data on the page; Added how much you\'ve earned from the clicks in the ad counter box in two places - if you hover over the individual counts for specific ad-types, the tooltip text will indicate how much you\'ve earned from that ad-type (useful for double checking what the script believes the values of the clicks to be), and also below the date selector is the sum of how much you\'ve earned from all ad-types for that day; Removed a bunch of try/catch blocks because they\'re not so useful now that the script is mostly stable;","tree":"c23a9581d0d7cd9b5ff94e673f2438509e4f7baf","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"0a824778ed1733ec9c52d37a7c860d4ec054eb2f"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/8324300cf4b9b159a67a9b00f636968f63c1a54d","id":"8324300cf4b9b159a67a9b00f636968f63c1a54d","committed_date":"2011-07-13T17:50:59-07:00","authored_date":"2011-07-13T17:50:59-07:00","message":"Enhanced the logging methods; Changed how the rental bands are defined to use a new function(); Include the padZeros function within the formatTime() function;","tree":"8561da9e42336cf96ebaf2f051cd47993bc4193b","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a714bedbfce8ffe518654e4ce6aa65480d6b2268"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/0a824778ed1733ec9c52d37a7c860d4ec054eb2f","id":"0a824778ed1733ec9c52d37a7c860d4ec054eb2f","committed_date":"2011-06-27T03:47:46-07:00","authored_date":"2011-06-27T03:47:46-07:00","message":"added (due to the quantity, non-modal) \'modalCheckpoint\'s to help debug for ultimate users","tree":"29dc97c5efd49a6163aa940571bebbbb8eac65d8","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"7441cdf96ca02f7f79839a3dfdff9b841b595074"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a714bedbfce8ffe518654e4ce6aa65480d6b2268","id":"a714bedbfce8ffe518654e4ce6aa65480d6b2268","committed_date":"2011-06-21T16:59:41-07:00","authored_date":"2011-06-21T16:59:41-07:00","message":"source \'beautified\' using jsbeautifier.org","tree":"8aed2617346b59ed0d115f192b765106a9f9f5bf","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"e9ebb8ac922e00052f69c5d9fec93dac86082f42"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/7441cdf96ca02f7f79839a3dfdff9b841b595074","id":"7441cdf96ca02f7f79839a3dfdff9b841b595074","committed_date":"2011-06-21T11:29:34-07:00","authored_date":"2011-06-21T11:29:34-07:00","message":"Typo","tree":"240b4e58f755f7d5281bb748e692c058b41e0fe2","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"c6782dc3751ae517fcc37a16deeecb199dcd4cff"},{"id":"a8b2dc5ba7a5bab63dd748f2fab68978f6ac89c5"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/e9ebb8ac922e00052f69c5d9fec93dac86082f42","id":"e9ebb8ac922e00052f69c5d9fec93dac86082f42","committed_date":"2011-06-21T11:26:27-07:00","authored_date":"2011-06-21T11:26:27-07:00","message":"Merge branch \'master\' of github.com:kwah/Spanghurt\n\nConflicts:\n\tspanghurt.user.js","tree":"e3b31f67c3076396676adea34feca246d8aff7bb","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"57fa688e725cdad7b0f5cbd8caa39e1d29f1e541"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/c6782dc3751ae517fcc37a16deeecb199dcd4cff","id":"c6782dc3751ae517fcc37a16deeecb199dcd4cff","committed_date":"2011-06-21T11:14:47-07:00","authored_date":"2011-06-21T11:14:47-07:00","message":"Replaced all getPref() calls to be pr[prefName].getValue() calls;\nReplaced all setPref() calls to be pr[prefName].setValue() calls;\n\nAll stored items should be declared in one location (with all the others currently starting at line 253);\n\nFixed getValue() to use the default value properly;\n\nAdded a bunch more translation strings;\n\nSomewhat cleaned up the storage of referral data (incl fixing of referralType for direct referrals / showing the next payment date only on the rented referrals listings) but it definitely still needs more work;","tree":"e3b31f67c3076396676adea34feca246d8aff7bb","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a4a533cbca3a4aad3e2dd6b160661b8aecaeb81a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/57fa688e725cdad7b0f5cbd8caa39e1d29f1e541","id":"57fa688e725cdad7b0f5cbd8caa39e1d29f1e541","committed_date":"2011-06-21T09:44:59-07:00","authored_date":"2011-06-21T09:44:59-07:00","message":"Replaced all getPref() calls to be pr[prefName].getValue() calls;\nReplaced all setPref() calls to be pr[prefName].setValue() calls;\n\nAll stored items should be declared in one location (with all the others currently starting at line 253)\n\nFixed getValue() to use the default value properly instead of the options","tree":"6ac0ca5b65514013529fc77d987f3c1672814e32","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"dabebc4b41a91c2aef6af8f7131c993850c87d18"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a4a533cbca3a4aad3e2dd6b160661b8aecaeb81a","id":"a4a533cbca3a4aad3e2dd6b160661b8aecaeb81a","committed_date":"2011-06-21T03:56:50-07:00","authored_date":"2011-06-21T03:56:50-07:00","message":"MASSIVE changes to the code but this is because I\'d not had git running properly for a couple of weeks so regular small commits didn\'t happen as usual >.<\n\nAdded a \'modaCheckpoint\' function that can be called and will temporarily halt script execution while giving an indication of where in the script is currently being executed - useful to hunt down which part of a script is freezing for example (find last place alert was called and bug will be just after this..)\n\nAltered code style throughout to have a space following a comma;\n\nStarting to migrate to the new userPreference() interface;\n\nAdded a bunch of translation strings;\n\nSource of freezing on the initial setup appears to be when setting the numberOfRentedReferrals - when the setPref(\'numberOfRentedReferrals\', tmp_rentedRefs[1], { prefType: \'integer\' }); part line is replaced by a 0 the script setup does not freeze;\n\nthrow if setup isn\'t complete rather than return (return causes issues when being run within the firebug console as it isn\'t within a function block - greasemonkey automatically wraps scripts within an anonymous function);\n\nadded checks to the referral listings functions so that they do not cause issues if the item is not supplied / is null -- eg, on the direct referral listings page the flagIdToColour does not have a flagId to convert thus breaks, similarly for ultimateClickValues;\n\n improved direct referral listings page functionality so that (hopefully) it isn\'t as broken / it actually works somewhat (eg only try to textify the flag if it is the rented referral listings page / column indexes are distinct for each listings page);\n\n Removed alert()s when pages break - TODO stop catching errors and just let the script fail;","tree":"04b231d14789f67d49368b8ae85e38c052637a22","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"5ae88cf71e702f59a260d2fcaadd448d4c22e90a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a8b2dc5ba7a5bab63dd748f2fab68978f6ac89c5","id":"a8b2dc5ba7a5bab63dd748f2fab68978f6ac89c5","committed_date":"2011-05-27T14:45:12-07:00","authored_date":"2011-05-27T14:45:12-07:00","message":"Fixed 2 instances of prefType: \'text\' used instead of prefType: \'string\' - stops my browser from freezing on the direct referral listings page so is believed to be the cause of other pages freezing too;","tree":"4e498b45e29f41cfcecc6653763385391ac93dc8","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"dabebc4b41a91c2aef6af8f7131c993850c87d18"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/5ae88cf71e702f59a260d2fcaadd448d4c22e90a","id":"5ae88cf71e702f59a260d2fcaadd448d4c22e90a","committed_date":"2011-05-26T16:31:05-07:00","authored_date":"2011-05-26T16:31:05-07:00","message":"Removed alerts from the catch blocks;","tree":"7a778b13dc12e65c2f344739337eff9625a39288","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a0cb3028cc6f97653537e7c22d9bf1a66140b887"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/dabebc4b41a91c2aef6af8f7131c993850c87d18","id":"dabebc4b41a91c2aef6af8f7131c993850c87d18","committed_date":"2011-05-24T16:58:13-07:00","authored_date":"2011-05-24T16:58:13-07:00","message":"Rearranged a few functions (eg, move url tests to be methods(?) of the currentPage object, moved the REFERRAL template out of the referralListings object); Added numberOfReferrals to userAccount object; Significant changes to the structure of how referral data is stored - now properly stores day-by-day cache of referral information (nb: not yet tested with direct referrals); Within the REFERRAL object, referral properties are now defined separately to the inner function declarations for clarity; Removed a whole bunch of redundant code (eg, old stuff now handled by the REFERRAL object, unused/old debugging code...); Moved the extra column declarations into clear single line new COLUMN() declarations; Added ability to selectively include / exclude extra column stuff based on membership type; Temporary patch for the sidebar where \'Yesterday\' was including today\'s values in the sum too - not convinced that it is fully corrected though;","tree":"e73d4d84ec64b1b50bd8e6ec137bc4e4ba445cf7","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"cd3798c557efed94d3baba1af79a7f8a9d793b2d"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a0cb3028cc6f97653537e7c22d9bf1a66140b887","id":"a0cb3028cc6f97653537e7c22d9bf1a66140b887","committed_date":"2011-05-18T05:53:15-07:00","authored_date":"2011-05-18T05:53:15-07:00","message":"Fixed the userscript meta header section (somehow missing?) Also shown some love to the referral listings page:\n* Added Expenses column\n* Added Net Income column\n* Added ultimate click graph values column (though will show -1 for  non-ultimate members)","tree":"e9f74be8ed552e6ce106a3599035a87ee5f0bfaa","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"d3905805d0e3eea8ade5ce090ea51192766b4a59"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/cd3798c557efed94d3baba1af79a7f8a9d793b2d","id":"cd3798c557efed94d3baba1af79a7f8a9d793b2d","committed_date":"2011-05-14T16:54:16-07:00","authored_date":"2011-05-14T16:54:16-07:00","message":"Finally finished hunting through the remainder of the recovered data and it turns out the remaining changes were mostly whitespace differences.. Anyhow..\n\nShown some love to the referral listings page:\n* Added Expenses column\n* Added Net Income column\n* Added ultimate click graph values column (though will show -1 for  non-ultimate members)","tree":"d3897517e86c954ba385cdbe08785ea3b1eaff5d","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"075a8664a4ea913e37257c867daf7422648217fd"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/d3905805d0e3eea8ade5ce090ea51192766b4a59","id":"d3905805d0e3eea8ade5ce090ea51192766b4a59","committed_date":"2011-05-14T09:17:50-07:00","authored_date":"2011-05-14T09:17:50-07:00","message":"Stage one of reintroducing recovered changes afher accidentally deleting the file.. Cannot restore directly due to file fragmentation;","tree":"e0e91c8ddf740d5d17ef2c920dc052bef1e731d4","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"95bb57527f379e9b8ef75fddd104b31aefc0865b"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/075a8664a4ea913e37257c867daf7422648217fd","id":"075a8664a4ea913e37257c867daf7422648217fd","committed_date":"2011-05-14T06:12:22-07:00","authored_date":"2011-05-14T06:12:22-07:00","message":"Changed a line that oddly only seems to break the script before the script has been run.. changing it to this makes the scirpt run correctly and reverting it back works if the script has been run before O.o","tree":"c410e486fce5e30ef994afd6fd71126e425e4077","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}}]};'."

  function getNumberOfUpdatesSinceCurrent(arg_receivedCommitHistory) {
    var tmp_rh = arg_receivedCommitHistory;
    console.info(tmp_rh);

    var numberOfUpdatesSinceCurrent = -1;

    for(var i=0; i < tmp_rh.commits.length; i++) {
      if(tmp_rh.commits[i]['id'] === ch['id']) {
        //If the current commit id is within the last 35 commits, this will return how many "new" updates have been made
        //   If the current one is the latest, shall return 0
        numberOfUpdatesSinceCurrent = i;
        return numberOfUpdatesSinceCurrent;
      }
    }

    //Else If the current commit id isn't found, shall return -1
    return numberOfUpdatesSinceCurrent;
  }


  function callback_processCommitHistory(arg_receivedCommitHistory){
    var updatesSinceCurrent = getNumberOfUpdatesSinceCurrent(arg_receivedCommitHistory);

    if(updatesSinceCurrent === -1) {
      //Current id not found, possible that the current id is corrupted or the receivedCommitHistory is old
      // -> wait until next update
      // -> then strongly suggest update?
      console.info('updatesSinceCurrent === -1; Error finding the current commit id, assuming corrupt / extremely old commit id; Recommending user installs latest version;');

      if(confirm('Cannot find your @commit-id within the recent commits. It is recommended that you install the latest update from: \n' +
          'http://kwah.org/scripts/spanghurt/spanghurt-latest.user.js \n' +
          '\n' +
          'Click OK to do this now else click Cancel to ignore this message until the next update check.')) {

        console.info('updatesSinceCurrent === -1; Installing latest script from http://kwah.org/scripts/spanghurt/spanghurt-latest.user.js');
        location.href = 'http://kwah.org/scripts/spanghurt/spanghurt-latest.user.js';
      }
    }
    else if(updatesSinceCurrent === 0) {
      //Current id is latest update, do nothing
      console.info('updatesSinceCurrent === 0; No updates available;');
    }
    else {
      //Updates are available
      // -> display number of new commitsSinceCurrent
      // -> alert user that updates are available
      // -> direct user to http://kwah.org/scripts/spanghurt/spanghurt-latest.user.js

      if(confirm('There have been ' + updatesSinceCurrent + ' commits (updates) since this script was installed. It is recommended that you install the latest update from: \n' +
          'http://kwah.org/scripts/spanghurt/spanghurt-latest.user.js \n' +
          '\n' +
          'Click OK to do this now else click Cancel to ignore this message until the next update check.')) {

        console.info('} else {; Installing latest script from http://kwah.org/scripts/spanghurt/spanghurt-latest.user.js');
        location.href = 'http://kwah.org/scripts/spanghurt/spanghurt-latest.user.js';
      }
    }

  }

  function getCommitHistory(arg_url) {
    var receivedCommitHistory;

    if(arg_url = null) {
      //Mockup test
      console.info("arg_url is null, using mockup receivedCommitHistory");
      receivedCommitHistory = '{"commits":[{"parents":[{"id":"95ad5cf6dbd0e9fdd1bf1147c0b06ecbf27091a5"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/fd89463c7f137e95b02c5823150d5a70238e953c","id":"fd89463c7f137e95b02c5823150d5a70238e953c","committed_date":"2011-07-23T10:30:39-07:00","authored_date":"2011-07-23T10:30:39-07:00","message":"Amended some of the preference storage code to not treat false default values as erroneous & replaced by an empty string;\n\nAdded a new column (disabled by default, toggled by < greasemonkey.scriptvals.http://kwah.org//Spanghurt.showRefClicks >) to the referral listings pages that displays the difference in total clicks of each day and the stored total previous to it - EXTREMELY unreliable, dependant heavily on when the referral listings pages are viewed. Ref: #17","tree":"f1bf95ba2069011f482a998590a082f054950f6a","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"f57c6428b3f54057f6dd74d7c19999c111fefcb9"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/95ad5cf6dbd0e9fdd1bf1147c0b06ecbf27091a5","id":"95ad5cf6dbd0e9fdd1bf1147c0b06ecbf27091a5","committed_date":"2011-07-23T06:27:55-07:00","authored_date":"2011-07-23T06:27:55-07:00","message":"Added sorting arrows to the referral listings; added code to remove the duplicate sorting arrows; Ref: #13","tree":"21b4bcd5d4777cb5e0d5f607b9a600bbbb4e5d79","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"e335ea98792f43702048e8d63f44b97c62900fca"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/f57c6428b3f54057f6dd74d7c19999c111fefcb9","id":"f57c6428b3f54057f6dd74d7c19999c111fefcb9","committed_date":"2011-07-22T15:33:00-07:00","authored_date":"2011-07-22T15:33:00-07:00","message":"Add sorting arrows to the referral graphs ( ref: #13 );","tree":"f0957c3c97031f569c7fb2ac31700af14890dd10","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"b1c22f4f36c5fd5dd43eea2345030bf46fd861ef"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/e335ea98792f43702048e8d63f44b97c62900fca","id":"e335ea98792f43702048e8d63f44b97c62900fca","committed_date":"2011-07-22T11:08:22-07:00","authored_date":"2011-07-22T11:08:22-07:00","message":"Stop overwriting the column header links when replacing the column contents;","tree":"14b799ccec8187b00645f696cb34668eae4da044","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"60054ffa9a906cba5c1457826c2005164efd474a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/b1c22f4f36c5fd5dd43eea2345030bf46fd861ef","id":"b1c22f4f36c5fd5dd43eea2345030bf46fd861ef","committed_date":"2011-07-20T05:48:01-07:00","authored_date":"2011-07-20T05:48:01-07:00","message":"Added projected net income to the statsSidebar (related: issue #7 ) BUT code style issues remain (its not a \'clean\' implementation);","tree":"10e80b204c53dc9643ac1d3a86fcb768ac09df2b","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"489adffabf61c373ad7a376cf6f0dc9a22a756b8"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/60054ffa9a906cba5c1457826c2005164efd474a","id":"60054ffa9a906cba5c1457826c2005164efd474a","committed_date":"2011-07-20T05:42:15-07:00","authored_date":"2011-07-20T05:42:15-07:00","message":"Fixed the displayed (projected) number of rented clicks in the statsSidebar;","tree":"db3b1562409e15d516e4fc210a422001a05ba471","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"1044037f5cd0ada90fea24fc880128157058c6f8"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/489adffabf61c373ad7a376cf6f0dc9a22a756b8","id":"489adffabf61c373ad7a376cf6f0dc9a22a756b8","committed_date":"2011-07-19T18:12:35-07:00","authored_date":"2011-07-19T18:12:35-07:00","message":"Changed light blue bar to indicate the mean profit over the last ten days as opposed to moving average; related: #11 ;","tree":"e00703946272d0bd1ac93436b4c626d22200d522","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"9abd4a2cc2721008314c941672a339b1618189b6"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/1044037f5cd0ada90fea24fc880128157058c6f8","id":"1044037f5cd0ada90fea24fc880128157058c6f8","committed_date":"2011-07-18T19:11:09-07:00","authored_date":"2011-07-18T19:11:09-07:00","message":"Minor bugtweak for the profit graph to include today (missed a single = sign)","tree":"75f2a4a420a4c49d9483425a9588c3dffcd7bf63","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"eeb09ccd07606807b953442946fded560bdd6a4a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/9abd4a2cc2721008314c941672a339b1618189b6","id":"9abd4a2cc2721008314c941672a339b1618189b6","committed_date":"2011-07-18T17:39:17-07:00","authored_date":"2011-07-18T17:39:17-07:00","message":"Moved the call to insertProfitGraph() so that it only gets called on the referralStatistics page;","tree":"f522057c391019ffc47fd941ce53b2f41c82d0bf","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"9ec75a6bfc831dbb788ae5d1c255c7b69bce3818"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/eeb09ccd07606807b953442946fded560bdd6a4a","id":"eeb09ccd07606807b953442946fded560bdd6a4a","committed_date":"2011-07-18T16:43:00-07:00","authored_date":"2011-07-18T16:43:00-07:00","message":"Removed an extra couple of characters that had erroneously crept in;","tree":"d2a974dafbd940215d9e655dc904d795ed497aa7","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a1fd0f7308e6dfa10c5e3b7e6957208ce0af7cf5"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/9ec75a6bfc831dbb788ae5d1c255c7b69bce3818","id":"9ec75a6bfc831dbb788ae5d1c255c7b69bce3818","committed_date":"2011-07-18T16:35:15-07:00","authored_date":"2011-07-18T16:35:15-07:00","message":"Added profit graph to the referral statistics page ( related: #11 ); Fixed goldenCost for golden members;","tree":"fbaea1d936e43b91aa85261ff9add4d42de12d46","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"5696a6418b3613b8ab7eaad5accd807d4bd17f39"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a1fd0f7308e6dfa10c5e3b7e6957208ce0af7cf5","id":"a1fd0f7308e6dfa10c5e3b7e6957208ce0af7cf5","committed_date":"2011-07-18T12:29:13-07:00","authored_date":"2011-07-18T12:29:13-07:00","message":"Filled in / corrected missing parameters in generateSidebarData();","tree":"bd212166083a6c81c494a25340f1444aae36d62f","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"d330c8d00da654d3d0d17a0ea29e71243b44abf1"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/5696a6418b3613b8ab7eaad5accd807d4bd17f39","id":"5696a6418b3613b8ab7eaad5accd807d4bd17f39","committed_date":"2011-07-18T12:12:36-07:00","authored_date":"2011-07-18T12:12:36-07:00","message":"Removed tabs at ends of lines for the export text; Whole bunch of rearranging the code within the insertSidebar() function; Confirmed that the values created into statsSidebar[] are correct;","tree":"1277d7c53d2356286addbde4ecd6bff55e58fd80","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"fd1b9ccbf381556ef8085a16ee8377302484ade2"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/d330c8d00da654d3d0d17a0ea29e71243b44abf1","id":"d330c8d00da654d3d0d17a0ea29e71243b44abf1","committed_date":"2011-07-18T05:51:49-07:00","authored_date":"2011-07-18T05:51:49-07:00","message":"Changed appearance of D/H/M text to be less light & more readable;","tree":"9d75d83fe775651f1e1772e7969e0c6e15b25203","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"da91c42842c8031d0cff7f59ae009abb117d71b6"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/fd1b9ccbf381556ef8085a16ee8377302484ade2","id":"fd1b9ccbf381556ef8085a16ee8377302484ade2","committed_date":"2011-07-16T09:53:18-07:00","authored_date":"2011-07-16T09:53:18-07:00","message":"Added column indexes specific to the direct referrals page;","tree":"79800332fad6fdea9b7ef169325a64106396c490","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"5181b396d5446dabb0b78d642022eef7ec1a550f"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/da91c42842c8031d0cff7f59ae009abb117d71b6","id":"da91c42842c8031d0cff7f59ae009abb117d71b6","committed_date":"2011-07-16T07:21:21-07:00","authored_date":"2011-07-16T07:21:21-07:00","message":"Removed the ultimate click values column temporarily until it is functioning correctly; Added colours to the netIncome column - red indicates negative netIncome, blue indicates positive netIncome but less than the cost of a recycle; green indicates a positive netIncome above the cost of a recycle; black indicates zero netIncome or a netIncome equal to the cost of a recycle;","tree":"fd778def1bb26b8e1623b0b5b44cafbfffe10157","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"2898c3c72b31a53c041a1bbe4f3f9d6113bed317"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/5181b396d5446dabb0b78d642022eef7ec1a550f","id":"5181b396d5446dabb0b78d642022eef7ec1a550f","committed_date":"2011-07-15T17:44:52-07:00","authored_date":"2011-07-15T17:44:52-07:00","message":"Oops, missed the next payment column.. Done now..","tree":"90379bd44987f68c33d77d26086f4a23ec8210c5","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"40781807eaa0cf92c4ea3858c80ca3fe5a4ef5db"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/2898c3c72b31a53c041a1bbe4f3f9d6113bed317","id":"2898c3c72b31a53c041a1bbe4f3f9d6113bed317","committed_date":"2011-07-15T17:29:30-07:00","authored_date":"2011-07-15T17:29:30-07:00","message":"Added functionality to append / prepend / replace referral listings column contents (so that they\'re not all simply added as new columns; Added checks in with the ultimate-only click guide code so that it doesn\'t crash and burn when something goes amiss with detecting the ultimate minigraph data sources;","tree":"c67d757f938d5695ce83d000c74a7162d4a80dff","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"7eb0239ad34657f74be34f28b50bb34de9367ea3"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/40781807eaa0cf92c4ea3858c80ca3fe5a4ef5db","id":"40781807eaa0cf92c4ea3858c80ca3fe5a4ef5db","committed_date":"2011-07-14T16:19:47-07:00","authored_date":"2011-07-14T16:19:47-07:00","message":"Fixed &laquo; on adCounterBox; Started code for running modules;","tree":"9cdccca090044e4f372fc2dfa8e5674b953616af","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"8324300cf4b9b159a67a9b00f636968f63c1a54d"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/7eb0239ad34657f74be34f28b50bb34de9367ea3","id":"7eb0239ad34657f74be34f28b50bb34de9367ea3","committed_date":"2011-07-14T15:18:55-07:00","authored_date":"2011-07-14T15:18:55-07:00","message":"Rearranged some parts of the code to try and make it more organised.. certainly not the last time moves like this will be done; Switched a bunch of Neobux.accountDefaults to getter functions; Added an escape path if cannot find any graph data on the page; Added how much you\'ve earned from the clicks in the ad counter box in two places - if you hover over the individual counts for specific ad-types, the tooltip text will indicate how much you\'ve earned from that ad-type (useful for double checking what the script believes the values of the clicks to be), and also below the date selector is the sum of how much you\'ve earned from all ad-types for that day; Removed a bunch of try/catch blocks because they\'re not so useful now that the script is mostly stable;","tree":"c23a9581d0d7cd9b5ff94e673f2438509e4f7baf","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"0a824778ed1733ec9c52d37a7c860d4ec054eb2f"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/8324300cf4b9b159a67a9b00f636968f63c1a54d","id":"8324300cf4b9b159a67a9b00f636968f63c1a54d","committed_date":"2011-07-13T17:50:59-07:00","authored_date":"2011-07-13T17:50:59-07:00","message":"Enhanced the logging methods; Changed how the rental bands are defined to use a new function(); Include the padZeros function within the formatTime() function;","tree":"8561da9e42336cf96ebaf2f051cd47993bc4193b","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a714bedbfce8ffe518654e4ce6aa65480d6b2268"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/0a824778ed1733ec9c52d37a7c860d4ec054eb2f","id":"0a824778ed1733ec9c52d37a7c860d4ec054eb2f","committed_date":"2011-06-27T03:47:46-07:00","authored_date":"2011-06-27T03:47:46-07:00","message":"added (due to the quantity, non-modal) \'modalCheckpoint\'s to help debug for ultimate users","tree":"29dc97c5efd49a6163aa940571bebbbb8eac65d8","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"7441cdf96ca02f7f79839a3dfdff9b841b595074"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a714bedbfce8ffe518654e4ce6aa65480d6b2268","id":"a714bedbfce8ffe518654e4ce6aa65480d6b2268","committed_date":"2011-06-21T16:59:41-07:00","authored_date":"2011-06-21T16:59:41-07:00","message":"source \'beautified\' using jsbeautifier.org","tree":"8aed2617346b59ed0d115f192b765106a9f9f5bf","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"e9ebb8ac922e00052f69c5d9fec93dac86082f42"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/7441cdf96ca02f7f79839a3dfdff9b841b595074","id":"7441cdf96ca02f7f79839a3dfdff9b841b595074","committed_date":"2011-06-21T11:29:34-07:00","authored_date":"2011-06-21T11:29:34-07:00","message":"Typo","tree":"240b4e58f755f7d5281bb748e692c058b41e0fe2","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"c6782dc3751ae517fcc37a16deeecb199dcd4cff"},{"id":"a8b2dc5ba7a5bab63dd748f2fab68978f6ac89c5"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/e9ebb8ac922e00052f69c5d9fec93dac86082f42","id":"e9ebb8ac922e00052f69c5d9fec93dac86082f42","committed_date":"2011-06-21T11:26:27-07:00","authored_date":"2011-06-21T11:26:27-07:00","message":"Merge branch \'master\' of github.com:kwah/Spanghurt\n\nConflicts:\n\tspanghurt.user.js","tree":"e3b31f67c3076396676adea34feca246d8aff7bb","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"57fa688e725cdad7b0f5cbd8caa39e1d29f1e541"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/c6782dc3751ae517fcc37a16deeecb199dcd4cff","id":"c6782dc3751ae517fcc37a16deeecb199dcd4cff","committed_date":"2011-06-21T11:14:47-07:00","authored_date":"2011-06-21T11:14:47-07:00","message":"Replaced all getPref() calls to be pr[prefName].getValue() calls;\nReplaced all setPref() calls to be pr[prefName].setValue() calls;\n\nAll stored items should be declared in one location (with all the others currently starting at line 253);\n\nFixed getValue() to use the default value properly;\n\nAdded a bunch more translation strings;\n\nSomewhat cleaned up the storage of referral data (incl fixing of referralType for direct referrals / showing the next payment date only on the rented referrals listings) but it definitely still needs more work;","tree":"e3b31f67c3076396676adea34feca246d8aff7bb","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a4a533cbca3a4aad3e2dd6b160661b8aecaeb81a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/57fa688e725cdad7b0f5cbd8caa39e1d29f1e541","id":"57fa688e725cdad7b0f5cbd8caa39e1d29f1e541","committed_date":"2011-06-21T09:44:59-07:00","authored_date":"2011-06-21T09:44:59-07:00","message":"Replaced all getPref() calls to be pr[prefName].getValue() calls;\nReplaced all setPref() calls to be pr[prefName].setValue() calls;\n\nAll stored items should be declared in one location (with all the others currently starting at line 253)\n\nFixed getValue() to use the default value properly instead of the options","tree":"6ac0ca5b65514013529fc77d987f3c1672814e32","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"dabebc4b41a91c2aef6af8f7131c993850c87d18"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a4a533cbca3a4aad3e2dd6b160661b8aecaeb81a","id":"a4a533cbca3a4aad3e2dd6b160661b8aecaeb81a","committed_date":"2011-06-21T03:56:50-07:00","authored_date":"2011-06-21T03:56:50-07:00","message":"MASSIVE changes to the code but this is because I\'d not had git running properly for a couple of weeks so regular small commits didn\'t happen as usual >.<\n\nAdded a \'modaCheckpoint\' function that can be called and will temporarily halt script execution while giving an indication of where in the script is currently being executed - useful to hunt down which part of a script is freezing for example (find last place alert was called and bug will be just after this..)\n\nAltered code style throughout to have a space following a comma;\n\nStarting to migrate to the new userPreference() interface;\n\nAdded a bunch of translation strings;\n\nSource of freezing on the initial setup appears to be when setting the numberOfRentedReferrals - when the setPref(\'numberOfRentedReferrals\', tmp_rentedRefs[1], { prefType: \'integer\' }); part line is replaced by a 0 the script setup does not freeze;\n\nthrow if setup isn\'t complete rather than return (return causes issues when being run within the firebug console as it isn\'t within a function block - greasemonkey automatically wraps scripts within an anonymous function);\n\nadded checks to the referral listings functions so that they do not cause issues if the item is not supplied / is null -- eg, on the direct referral listings page the flagIdToColour does not have a flagId to convert thus breaks, similarly for ultimateClickValues;\n\n improved direct referral listings page functionality so that (hopefully) it isn\'t as broken / it actually works somewhat (eg only try to textify the flag if it is the rented referral listings page / column indexes are distinct for each listings page);\n\n Removed alert()s when pages break - TODO stop catching errors and just let the script fail;","tree":"04b231d14789f67d49368b8ae85e38c052637a22","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"5ae88cf71e702f59a260d2fcaadd448d4c22e90a"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a8b2dc5ba7a5bab63dd748f2fab68978f6ac89c5","id":"a8b2dc5ba7a5bab63dd748f2fab68978f6ac89c5","committed_date":"2011-05-27T14:45:12-07:00","authored_date":"2011-05-27T14:45:12-07:00","message":"Fixed 2 instances of prefType: \'text\' used instead of prefType: \'string\' - stops my browser from freezing on the direct referral listings page so is believed to be the cause of other pages freezing too;","tree":"4e498b45e29f41cfcecc6653763385391ac93dc8","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"dabebc4b41a91c2aef6af8f7131c993850c87d18"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/5ae88cf71e702f59a260d2fcaadd448d4c22e90a","id":"5ae88cf71e702f59a260d2fcaadd448d4c22e90a","committed_date":"2011-05-26T16:31:05-07:00","authored_date":"2011-05-26T16:31:05-07:00","message":"Removed alerts from the catch blocks;","tree":"7a778b13dc12e65c2f344739337eff9625a39288","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"a0cb3028cc6f97653537e7c22d9bf1a66140b887"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/dabebc4b41a91c2aef6af8f7131c993850c87d18","id":"dabebc4b41a91c2aef6af8f7131c993850c87d18","committed_date":"2011-05-24T16:58:13-07:00","authored_date":"2011-05-24T16:58:13-07:00","message":"Rearranged a few functions (eg, move url tests to be methods(?) of the currentPage object, moved the REFERRAL template out of the referralListings object); Added numberOfReferrals to userAccount object; Significant changes to the structure of how referral data is stored - now properly stores day-by-day cache of referral information (nb: not yet tested with direct referrals); Within the REFERRAL object, referral properties are now defined separately to the inner function declarations for clarity; Removed a whole bunch of redundant code (eg, old stuff now handled by the REFERRAL object, unused/old debugging code...); Moved the extra column declarations into clear single line new COLUMN() declarations; Added ability to selectively include / exclude extra column stuff based on membership type; Temporary patch for the sidebar where \'Yesterday\' was including today\'s values in the sum too - not convinced that it is fully corrected though;","tree":"e73d4d84ec64b1b50bd8e6ec137bc4e4ba445cf7","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"cd3798c557efed94d3baba1af79a7f8a9d793b2d"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/a0cb3028cc6f97653537e7c22d9bf1a66140b887","id":"a0cb3028cc6f97653537e7c22d9bf1a66140b887","committed_date":"2011-05-18T05:53:15-07:00","authored_date":"2011-05-18T05:53:15-07:00","message":"Fixed the userscript meta header section (somehow missing?) Also shown some love to the referral listings page:\n* Added Expenses column\n* Added Net Income column\n* Added ultimate click graph values column (though will show -1 for  non-ultimate members)","tree":"e9f74be8ed552e6ce106a3599035a87ee5f0bfaa","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"d3905805d0e3eea8ade5ce090ea51192766b4a59"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/cd3798c557efed94d3baba1af79a7f8a9d793b2d","id":"cd3798c557efed94d3baba1af79a7f8a9d793b2d","committed_date":"2011-05-14T16:54:16-07:00","authored_date":"2011-05-14T16:54:16-07:00","message":"Finally finished hunting through the remainder of the recovered data and it turns out the remaining changes were mostly whitespace differences.. Anyhow..\n\nShown some love to the referral listings page:\n* Added Expenses column\n* Added Net Income column\n* Added ultimate click graph values column (though will show -1 for  non-ultimate members)","tree":"d3897517e86c954ba385cdbe08785ea3b1eaff5d","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"075a8664a4ea913e37257c867daf7422648217fd"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/d3905805d0e3eea8ade5ce090ea51192766b4a59","id":"d3905805d0e3eea8ade5ce090ea51192766b4a59","committed_date":"2011-05-14T09:17:50-07:00","authored_date":"2011-05-14T09:17:50-07:00","message":"Stage one of reintroducing recovered changes afher accidentally deleting the file.. Cannot restore directly due to file fragmentation;","tree":"e0e91c8ddf740d5d17ef2c920dc052bef1e731d4","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}},{"parents":[{"id":"95bb57527f379e9b8ef75fddd104b31aefc0865b"}],"author":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"},"url":"/kwah/Spanghurt/commit/075a8664a4ea913e37257c867daf7422648217fd","id":"075a8664a4ea913e37257c867daf7422648217fd","committed_date":"2011-05-14T06:12:22-07:00","authored_date":"2011-05-14T06:12:22-07:00","message":"Changed a line that oddly only seems to break the script before the script has been run.. changing it to this makes the scirpt run correctly and reverting it back works if the script has been run before O.o","tree":"c410e486fce5e30ef994afd6fd71126e425e4077","committer":{"name":"kwah","login":"kwah","email":"kwah90@gmail.com"}}]}';
      callback_processCommitHistory(receivedCommitHistory);
    }
    else {
      GM_xmlhttpRequest({
        method: "GET",
        url: arg_url,
        onload: function(response) {

          console.info([
            response.status,
            response.statusText,
            response.readyState,
            response.responseHeaders,
            response.responseText,
            response.finalUrl,
            response.responseXML
          ]);

          receivedCommitHistory = response.responseText;
          callback_processCommitHistory(receivedCommitHistory);
        }
      });
    }
  }

  var baseUpdateUrl = "http://github.com/api/v2/json/commits/list/kwah/spanghurt/";
  var updateBranch = "master";

  //var updateBranch = "stable";
  //getCommitHistory(baseUpdateUrl + updateBranch);



}


var enableAutomaticUpdates = pr['enableAutomaticUpdates'].getValue();
var timeSinceLastUpdate = new Date() - pr['timeOfLastUpdateCheck'].getValue();
var updateFrequency = pr['updateFrequency'].getValue() * 1000 * 60 * 60;

if(enableAutomaticUpdates === true &&
    'undefined' !== typeof commitInfo &&
    timeSinceLastUpdate >= updateFrequency
    ) {

  updater(commitInfo);
}
